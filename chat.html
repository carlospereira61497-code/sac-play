<script>
// 1. Matriz de InteligÃªncia Consolidada (Baseada nos seus JSONs)
const fluxos = {
    saudacao: () => {
        const hora = new Date().getHours();
        return hora < 12 ? "Bom dia" : hora < 18 ? "Boa tarde" : "Boa noite";
    },
    respostas: {
        "treinamento": "OlÃ¡, tudo bem?\n\nâš ï¸ Nosso atendimento estÃ¡ em *treinamento*. Retornamos Ã s 18h. ðŸ’™",
        "tim": "ðŸ“¡ *NOC:* Consultando Backbone TIM. Verifique se o LED 'Alarm' estÃ¡ aceso.",
        "vivo": "ðŸ“¡ *NOC:* Acessando gerÃªncia VIVO. O problema Ã© falha total ou lentidÃ£o?",
        "parceiro": "âœ¨ *Play Tecnologia:* VocÃª deseja implantar a MVNO para agregar valor ao seu produto?",
        "default": "ðŸ‘‹âœ¨ {{saudacao}}! Bem-vindo Ã  *Play MÃ³vel*! ðŸ“±ðŸ’™\n\nComo posso ajudar?\n1ï¸âƒ£ Suporte TÃ©cnico\n2ï¸âƒ£ Financeiro\n3ï¸âƒ£ Parcerias\n4ï¸âƒ£ Treinamento"
    }
};

// 2. FUNÃ‡ÃƒO DE ENVIO (O QUE ESTAVA FALTANDO)
function enviarMensagem() {
    const input = document.getElementById('chat-input');
    const container = document.getElementById('chat-messages');
    const msg = input.value.trim();
    
    if (msg !== "") {
        // Adiciona mensagem do usuÃ¡rio
        container.innerHTML += `<div class="message user">${msg}</div>`;
        input.value = '';

        // Resposta do Bot com os fluxos oficiais
        setTimeout(() => {
            let resposta = fluxos.respostas.default.replace("{{saudacao}}", fluxos.saudacao());
            const termo = msg.toLowerCase();

            if (termo.includes("treinamento")) resposta = fluxos.respostas.treinamento;
            else if (termo.includes("tim")) resposta = fluxos.respostas.tim;
            else if (termo.includes("vivo")) resposta = fluxos.respostas.vivo;
            else if (termo.includes("parceiro")) resposta = fluxos.respostas.parceiro;

            container.innerHTML += `<div class="message bot">${resposta}</div>`;
            container.scrollTop = container.scrollHeight;
        }, 600);
    }
}

// 3. Habilitar Tecla Enter
document.getElementById('chat-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') enviarMensagem();
});
</script>