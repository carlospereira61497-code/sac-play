// Matriz de InteligÃªncia Consolidada (Play MÃ³vel + MÃºtua + Parceiros + NOC)
const fluxosOficiais = {
    "saudacao": () => {
        const hora = new Date().getHours();
        if (hora < 12) return "Bom dia";
        if (hora < 18) return "Boa tarde";
        return "Boa noite";
    },
    "estados": {
        "INICIO": {
            msg: `ðŸ‘‹âœ¨ {{saudacao}}! Bem-vindo Ã  *Play MÃ³vel*!\n\nPara seguranÃ§a, informe seu *NÃºmero* ou *ID do Circuito* (apenas nÃºmeros):`,
            proximo: "MENU_PRINCIPAL"
        },
        "MENU_PRINCIPAL": {
            msg: "Como podemos evoluir sua experiÃªncia hoje?\n\n1ï¸âƒ£ Suporte TÃ©cnico (Tim/Vivo)\n2ï¸âƒ£ MÃºtua Celular\n3ï¸âƒ£ Financeiro / Faturamento\n4ï¸âƒ£ Parcerias & MVNO\n5ï¸âƒ£ Atendimento Humano",
            opcoes: {
                "1": "SUPORTE_NOC",
                "2": "MUTUA",
                "3": "FINANCEIRO",
                "4": "PARCEIROS",
                "5": "HUMANO"
            }
        },
        "RECONHECIMENTO": {
            msg: "âš ï¸ *Aviso Importante:*\nNosso time estÃ¡ em treinamento para melhor atendÃª-lo. O atendimento serÃ¡ retomado Ã s 18h. Agradecemos a compreensÃ£o! ðŸ’™"
        }
    }
};

// LÃ³gica de Processamento (O "CÃ©rebro" do Bot)
function processarResposta(mensagem) {
    const texto = mensagem.toLowerCase();
    
    // Se o cliente digitar algo sobre treinamento ou se vocÃª ativar o modo pausa
    if (texto.includes("treinamento")) return fluxosOficiais.estados.RECONHECIMENTO.msg;

    // Respostas RÃ¡pidas baseadas nos seus JSONs
    if (texto.includes("tim")) return "ðŸ“¡ *NOC:* Consultando Backbone TIM. Verifique se o LED 'Alarm' estÃ¡ aceso.";
    if (texto.includes("vivo")) return "ðŸ“¡ *NOC:* Acessando gerÃªncia VIVO. Informe se a falha Ã© em Samambaia ou regiÃ£o.";
    if (texto.includes("financeiro")) return "ðŸ’¸ *Faturamento:* Para 2Âª via de boletos, digite seu CPF/CNPJ.";
    
    return fluxosOficiais.estados.MENU_PRINCIPAL.msg.replace("{{saudacao}}", fluxosOficiais.saudacao());
}